#extension GL_EXT_frag_depth : enable

precision highp float;

varying vec2 v_textureCoord;
varying vec2 v_textureSize;
varying vec4 v_color;
varying float v_depth;
uniform sampler2D sprites;

void main(void)
{
    vec2 uv = gl_PointCoord;
    highp vec4 fragColor = texture2D(sprites, v_textureCoord + uv * v_textureSize);

    if(fragColor.a == 0.0) {
        discard;
    }

    gl_FragColor = v_color * fragColor;
    gl_FragDepthEXT = v_depth;
}
